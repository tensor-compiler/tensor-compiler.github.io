<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-red.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
<link rel="stylesheet" href="stylesheets/getmdl-select.min.css">
<!--<link rel="stylesheet" href="stylesheets/bootstrap-dropdown.css">-->
<link rel="stylesheet" href="stylesheets/style.css">
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="javascripts/getmdl-select.min.js"></script>
<script src="javascripts/jquery.ui.touch-punch.min.js"></script>
<script src="javascripts/FileSaver.min.js"></script>
<script src="javascripts/parser.js"></script>
<script src="javascripts/parser-indices.js"></script>
<script src="javascripts/default-schedules.js"></script>
<script src="javascripts/demo.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/app.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">
<link rel="stylesheet" href="stylesheets/dropdown.css">

<div class="mdl-grid" style="padding-top: 0px">
  <!--<div class="mdl-layout-spacer"></div>-->
  <div class="mdl-cell mdl-cell--12-col">
    <p style="line-height: 100%">This is an prototype implementation of the sparse tensor algebra compiler theory and contains known bugs, which are documented <a href="https://github.com/tensor-compiler/taco/issues">here</a>. If you find additional issues, please consider submitting a bug report.</p>
    <h6 style="margin-bottom: 0px; margin-top: 18px">Input a tensor algebra expression in index notation to generate code that computes it:</h6>
    <table style="width: 100%">
      <tr>
        <td>
          <div class="mdl-textfield mdl-js-textfield" style="width: 100%">
            <input id="txtExpr" class="mdl-textfield__input" value="y(i) = A(i,j) * x(j)" style="font-family: monospace" spellcheck="false" autocomplete="false" autocorrect="false" autocapitalize="false">
            <span id="lblError" class="mdl-textfield__error" style="font-size: 14px"></span>
          </div>
        </td>
        <td style="width: 32px; vertical-align: middle; padding-left: 0px; padding-right: 0px">
          <div style="position: relative">
            <button id="btnExamples" class="mdl-button mdl-js-button mdl-button--icon" style="width: 100%">
              <i class="material-icons">more_vert</i>
            </button>
            <ul id="listExamples" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" style="margin-top: 0em; margin-left: 0em" for="btnExamples"></ul>
          </div>
        </td>
        <td style="width: 200px; padding-right: 15px">
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label" 
          style="width: 100%">
            <input id="prefix" class="mdl-textfield__input" style="font-family: monospace" spellcheck="false" autocomplete="off" autocorrect="false" autocapitalize="false">
            <label class="mdl-textfield__label">(Optional) Prefix</label>
          </div>
        </td>
        <td style="width: 200px; vertical-align: middle">
          <button id="btnGetKernel" class="button demo-btn">Generate Kernel</button>
        </td>
      </tr>
    </table>
  </div>
  <!--<div class="mdl-layout-spacer"></div>-->
</div>
<div id="tblFormats" class="mdl-grid" style="padding-top: 0px; padding-bottom: 0px">
  <!--<div class="mdl-layout-spacer"></div>-->
  <div class="mdl-cell mdl-cell--12-col">
    <table class="mdl-data-table mdl-js-data-table" style="width: 100%; margin-bottom: 8px">
      <thead>
        <tr>
          <th class="mdl-data-table__cell--non-numeric" width="100" style="vertical-align: middle; padding-left: 9px">
            <div align="center" style="position:relative"><big>Tensor</big></div></th>
          <th class="mdl-data-table__cell--non-numeric" width="175px" 
            style="padding-left: 0px; vertical-align: middle">
            <div style="display:inline"><big>Format&nbsp;</big></div>
          </th>
          <th class="mdl-data-table__cell--non-numeric" style="padding-left: 7px; vertical-align: middle; text-align: left">
            <!--
            <div style="display:inline"><big>Level Formats&nbsp;</big></div>
            <div style="display:inline; margin-right:10px">(reorder dimensions by dragging the drop-down menus)</div>
            -->
            <div style="display:inline; vertical-align: middle">
              <button id="btnHelp" class="help-btn mdl-button mdl-js-button mdl-button--icon">
                <i class="material-icons" style="font-size:20px">help_outline</i>
              </button>
              <div id="helpMenu" class="help-menu mdl-menu mdl-js-menu mdl-js-ripple-effect" for="btnHelp">
                <p>
                  <strong>Dense</strong> levels store the size of the dimension $(N)$ and encode the coordinates in the interval $[0, N)$.
                  <img src="images/dense-arrays.jpg" class="centered-img" style="height: 29px; padding-top:10px">
                </p>
                <p>
                  <strong>Sparse</strong> levels store coordinates in a segment of the $\texttt{crd}$ array, with segment bounds stored in the $\texttt{pos}$ array.
                  <img src="images/compressed-arrays.jpg" class="centered-img" style="height: 50px; padding-top:10px">
                </p> 
                <p>
                  <strong>Singleton</strong> levels store individual coordinates (with no siblings) in the $\texttt{crd}$ array.
                  <img src="images/singleton-arrays.jpg" class="centered-img" style="height: 30px; padding-top:10px">
                </p>
                <p> 
                  A level is <strong>unique (U)</strong> if no collection of coordinates that share the same ancestors contains duplicates, and it is <strong>not unique (&not;U)</strong> otherwise.
                </p>
                <p style="margin-bottom: 0"> More info on formats that are supported by TACO can be found <a href="files/chou-oopsla18-taco-formats.pdf">here</a>.</p>
              </div>
            </div>
          </th>
        </tr>
      </thead>
      <tbody id="listTensors">
      </tbody>
    </table>
  </div>
  <!--<div class="mdl-layout-spacer"></div>-->
</div>

<div class="mdl-grid" style="padding-top: 6px">
  <!--<div class="mdl-layout-spacer"></div>-->
  <div class="mdl-cell mdl-cell--12-col">
    <table style="width: 100%; margin-bottom: 0px">
      <tr>
        <td style="width: 250px; vertical-align: middle">
          <button id="btnSchedule" class="button demo-btn" style="margin-bottom: 8px; margin-top: 8px">
            Add Scheduling Command
          </button>
        </td>
        <td style="vertical-align: middle; padding-left: 30px">
          <p style="font-size: 12px; line-height: 100%">Documentation for the scheduling language can be found <a href="http://tensor-compiler.org/docs/scheduling/index.html">here</a>.</p>
        </td>
        <td align="right" style="padding-right: 0px">
          <button id="btnCPU" class="button demo-btn" style="margin-top: 8px; margin-right: 12px; width: inherit">
            Sample CPU Schedule
          </button>
          <button id="btnGPU" class="button demo-btn" style="margin-top: 8px; margin-right: 12px; width: inherit">
            Sample GPU Schedule
          </button>
        </td>
      </tr>
    </table>
    <table class="mdl-data-table mdl-js-data-table" style="width: 100%; margin-bottom: 8px">
      <tbody id="tblSchedule">
      </tbody>
    </table>
  </div>
  <!--<div class="mdl-layout-spacer"></div>-->
</div>



<div class="select is-normal">
  <select>
    <option>Dense</option>
    <option label="Test">Compressed (w/ Unique Elements)</option>
    <option>Compressed (w/ Duplicate Elements)</option>
    <option>Singleton (w/ Unique Elements)</option>
    <option>Singleton (w/ Duplicate Elements)</option>
    <optgroup label="Compressed">
        <option>w/ Unique</option>
        <option>Velociraptor</option>
        <option>Deinonychus</option>
    </optgroup>
  </select>
</div>

<div class="dropdown">
  <div class="dropdown-trigger">
    <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
      <span>Dropdown button</span>
      <span class="icon is-small">
        <i class="fas fa-angle-down" aria-hidden="true"></i>
      </span>
    </button>
  </div>
  <div class="dropdown-menu" id="dropdown-menu" role="menu">
    <div class="dropdown-content">
      <a href="#" class="dropdown-item">
        Dropdown item
      </a>
      <a class="dropdown-item">
        Other dropdown item
      </a>
      <a href="#" class="dropdown-item">
        Active dropdown item
      </a>
      <a href="#" class="dropdown-item">
        Other dropdown item
      </a>
      <hr class="dropdown-divider">
      <a href="#" class="dropdown-item">
        With a divider
      </a>
    </div>
  </div>
</div>

<div class="field is-horizontal">
  <div class="field-label is-normal">
    <label class="label">Department</label>
  </div>
  <div class="field-body">
    <div class="field is-narrow">
      <div class="control">
        <div class="select is-fullwidth">
          <select>
            <option>Business development</option>
            <option>Marketing</option>
            <option>Sales</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="sortable"> 
<div class="field">
  <label class="label">Dimension 1</label>
  <div class="dropdown">
    <div class="dropdown-trigger">
      <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
        <span>Compressed (U)</span>
        <span class="icon is-small">
          <i class="fas fa-angle-down" aria-hidden="true"></i>
        </span>
      </button>
    </div>
    <div class="dropdown-menu" id="dropdown-menu" role="menu">
      <div class="dropdown-content">
        <a class="dropdown-item">
          Dense 
        </a>
        <hr class="dropdown-divider">
        <a class="dropdown-item">
          Compressed (w/ Unique Elements) 
        </a>
        <a class="dropdown-item">
          Compressed (w/ Duplicate Elements) 
        </a>
        <hr class="dropdown-divider">
        <a class="dropdown-item">
          Singleton (w/ Unique Elements) 
        </a>
        <a class="dropdown-item">
          Singleton (w/ Duplicate Elements) 
        </a>
      </div>
    </div>
  </div>
</div>
<div class="field" style="float: left">
  <label class="label">Dimension 1</label>
  <div class="dropdown">
    <div class="dropdown-trigger">
      <button class="button" aria-haspopup="true" aria-controls="dropdown-menu">
        <span>Compressed (U)</span>
        <span class="icon is-small">
          <i class="fas fa-angle-down" aria-hidden="true"></i>
        </span>
      </button>
    </div>
    <div class="dropdown-menu" id="dropdown-menu" role="menu">
      <div class="dropdown-content">
        <a class="dropdown-item">
          Dense 
        </a>
        <hr class="dropdown-divider">
        <a class="dropdown-item">
          Compressed (w/ Unique Elements) 
        </a>
        <a class="dropdown-item">
          Compressed (w/ Duplicate Elements) 
        </a>
        <hr class="dropdown-divider">
        <a class="dropdown-item">
          Singleton (w/ Unique Elements) 
        </a>
        <a class="dropdown-item">
          Singleton (w/ Duplicate Elements) 
        </a>
      </div>
    </div>
  </div>
</div>
</div>

<div class="mdl-grid" style="padding-top: 6px">
  <!--<div class="mdl-layout-spacer"></div>-->
  <div class="mdl-cell mdl-cell--12-col">
    <div id="panelKernels" class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">
      <table style="width: 100%">
        <tr>
          <td>
            <div class="mdl-tabs__tab-bar" style="justify-content: flex-start">
                <a href="#compute-panel" class="mdl-tabs__tab is-active">Compute Loops</a>
                <a href="#assembly-panel" class="mdl-tabs__tab">Assembly Loops</a>
                <a href="#full-panel" class="mdl-tabs__tab">Complete Code</a>
            </div>
          </td>
          <td style="width: 200px" align="right">
            <!--<div class="mdl-tabs__tab-bar" style="justify-content: flex-end">
                <a href="" class="mdl-tabs__tab">Download</a>
            </div>-->
            <button id="btnDownload" class="button demo-btn">Download</button>
          </td>
        </tr>
      </table>
      <div class="mdl-tabs__panel is-active" id="compute-panel">
        <pre style="margin: 0px 0px; padding: 0px 0px"><code id="txtComputeLoops" class="lang-cpp">/* The generated compute loops will appear here */</code></pre>
      </div>
      <div class="mdl-tabs__panel" id="assembly-panel">
        <pre style="margin: 0px 0px; padding: 0px 0px"><code id="txtAssemblyLoops" class="lang-cpp">/* The generated assembly loops will appear here */</code></pre>
      </div>
      <div class="mdl-tabs__panel" id="full-panel">
        <pre style="margin: 0px 0px; padding: 0px 0px"><code id="txtFullCode" class="lang-cpp">/* The complete generated code will appear here */</code></pre>
      </div>
    </div>
    <br>
    <p style="line-height: 100%" align="justify">The generated code is provided "as is" without warranty of any kind. To help us improve TACO, we keep an anonymized record of all requests submitted to the TACO online server.</p>
  </div>
  <!--<div class="mdl-layout-spacer"></div>-->
</div>

<script>demo()</script>

<link rel="stylesheet" href="{{ site.baseurl }}/assets/css/app.css">
